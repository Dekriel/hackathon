<!DOCTYPE html>
<html lang="en">
  <script>
    var canvas;
    var ctx;
    var width;
    var height;

    function draw_chess_board() {
      for (let row = 0; row < 8; row++) {
        for (let col = 0; col < 8; col++) {
          if (row % 2 != col % 2) continue;
          let [x, y] = get_bottom_left(col, row);
          ctx.beginPath();
          ctx.rect(x, y, width, height);
          ctx.fillStyle = '#aaaaaa';
          ctx.fill();
        }
      }
    }

    // origin is top left
    function get_bottom_left(x, y) {
      console.assert(x < 8 && x >= 0);
      console.assert(y < 8 && y >= 0);

      return [width * x, height * (7 - y)];
    }

    function draw_image(color, piece, row, col) {
      row = 7 - row;
      col = 7 - col;
      let [x, y] = get_bottom_left(col, row);
      var img = document.createElement('img');
      img.onload = function() {
        ctx.drawImage(this, y, x, width, height);
      };
      img.onerror = function() {
      	ctx.fillStyle = 'red';
      	ctx.font = '16px Arial';
       	ctx.fillText('Image loading error!', 10, 30);
      };
      img.src = "assets/chess_pieces/".concat(color).concat('/').concat(piece).concat('.png');
    }
    
    function init() {
      canvas = document.getElementById('myCanvas');
      ctx = canvas.getContext('2d');
      width = canvas.width / 8;
      height = canvas.height / 8;

      draw_chess_board();
      draw_image("black", "king", 7, 4);
    }

  </script>
  <body onload="init()">
  	<div style="text-align:center;">
      <canvas id="myCanvas" width="500" height="500" style="border:1px solid"></canvas>
    </div>
  </body>
</html>

